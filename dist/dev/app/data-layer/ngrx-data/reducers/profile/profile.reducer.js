"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var reselect_1 = require("reselect");
var ProfileActionTypes = require("../../../../business-layer/shared-types/actions/profile.action.types");
exports.initialState = {
    ids: [],
    entities: {},
    selectedProfileId: null,
    validUserName: null
};
function reducer(state, action) {
    if (state === void 0) { state = exports.initialState; }
    switch (action.type) {
        case ProfileActionTypes.REGISTER_USER_SUCCESS:
        case ProfileActionTypes.EDIT_USER_PROFILE_SUCCESS:
        case ProfileActionTypes.GET_USER_PROFILE_SUCCESS: {
            var user = void 0;
            if (action.payload.hasOwnProperty('user') ||
                action.payload.hasOwnProperty('username')) {
                var user_1 = action.payload.hasOwnProperty('user') ? (action.payload.user) : (action.payload);
                if (state.ids.indexOf(user_1.id) > -1) {
                    return state;
                }
                return {
                    ids: state.ids.concat([user_1.id]),
                    entities: Object.assign({}, state.entities, (_a = {},
                        _a[user_1.id] = user_1,
                        _a)),
                    selectedProfileId: user_1.id,
                    validUserName: state.validUserName
                };
            }
            else {
                return state;
            }
        }
        case ProfileActionTypes.CHECK_USER_PROFILE_NAME_SUCCESS: {
            if (action.payload) {
                var validUserName = ((action.payload).hasOwnProperty('username')) ? 'inValid' : 'valid';
                return Object.assign({}, state, { validUserName: validUserName });
            }
            return state;
        }
        case ProfileActionTypes.CHECK_USER_PROFILE_NAME_FAILURE: {
            return Object.assign({}, state, { validUserName: 'valid' });
        }
        case ProfileActionTypes.RESET_USER_PROFILE_NAME_VALID: {
            return Object.assign({}, state, { validUserName: 'invalid' });
        }
        case ProfileActionTypes.SET_SELECTED_PROFILE_ID: {
            if (state.ids.indexOf(action.payload) > -1) {
                return Object.assign({}, state, { selectedProfileId: action.payload });
            }
            else {
                return state;
            }
        }
        default: {
            return state;
        }
    }
    var _a;
}
exports.reducer = reducer;
exports.getEntities = function (state) { return state.entities; };
exports.getIds = function (state) { return state.ids; };
exports.getSelectedProfileId = function (state) { return state.selectedProfileId; };
exports.getValidUserName = function (state) { return state.validUserName; };
exports.getSelectedProfile = reselect_1.createSelector(exports.getEntities, exports.getSelectedProfileId, function (entities, selectedProfileId) {
    return entities[selectedProfileId];
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kYXRhLWxheWVyL25ncngtZGF0YS9yZWR1Y2Vycy9wcm9maWxlL3Byb2ZpbGUucmVkdWNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHFDQUEwQztBQUcxQyx5R0FBMkc7QUFTOUYsUUFBQSxZQUFZLEdBQVU7SUFDakMsR0FBRyxFQUFFLEVBQUU7SUFDUCxRQUFRLEVBQUUsRUFBRTtJQUNaLGlCQUFpQixFQUFFLElBQUk7SUFDdkIsYUFBYSxFQUFDLElBQUk7Q0FDbkIsQ0FBQztBQUVGLGlCQUF3QixLQUFvQixFQUFFLE1BQThCO0lBQXBELHNCQUFBLEVBQUEsNEJBQW9CO0lBQzFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLEtBQUssa0JBQWtCLENBQUMscUJBQXFCLENBQUM7UUFDOUMsS0FBSyxrQkFBa0IsQ0FBQyx5QkFBeUIsQ0FBQztRQUNsRCxLQUFLLGtCQUFrQixDQUFDLHdCQUF3QixFQUFDLENBQUM7WUFDOUMsSUFBSSxJQUFJLFNBQVUsQ0FBQztZQUNuQixFQUFFLENBQUEsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7Z0JBQ3JDLE1BQU0sQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDM0MsSUFBTSxNQUFJLEdBQWEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLEdBQWEsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFjLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUM3SCxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNwQyxNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUNmLENBQUM7Z0JBRUQs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YS1sYXllci9uZ3J4LWRhdGEvcmVkdWNlcnMvcHJvZmlsZS9wcm9maWxlLnJlZHVjZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0JztcbmltcG9ydCB7IFVzZXJNb2RlbCAgfSBmcm9tICcuLi8uLi8uLi8uLi9idXNpbmVzcy1sYXllci9tb2RlbHMvdXNlci5tb2RlbCc7XG5pbXBvcnQgKiBhcyBwcm9maWxlQWN0aW9ucyBmcm9tICcuLi8uLi9hY3Rpb25zL3Byb2ZpbGUuYWN0aW9ucyc7XG5pbXBvcnQgKiBhcyBQcm9maWxlQWN0aW9uVHlwZXMgZnJvbSAnLi4vLi4vLi4vLi4vYnVzaW5lc3MtbGF5ZXIvc2hhcmVkLXR5cGVzL2FjdGlvbnMvcHJvZmlsZS5hY3Rpb24udHlwZXMnO1xuXG5leHBvcnQgIGludGVyZmFjZSBTdGF0ZSB7XG4gIGlkczogc3RyaW5nW107XG4gIGVudGl0aWVzOiB7IFtpZDogc3RyaW5nXTogVXNlck1vZGVsIH07XG4gIHNlbGVjdGVkUHJvZmlsZUlkOiBzdHJpbmcgfCBudWxsO1xuICB2YWxpZFVzZXJOYW1lOnN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGluaXRpYWxTdGF0ZTogU3RhdGUgPSB7XG4gIGlkczogW10sXG4gIGVudGl0aWVzOiB7fSxcbiAgc2VsZWN0ZWRQcm9maWxlSWQ6IG51bGwsXG4gIHZhbGlkVXNlck5hbWU6bnVsbFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZXIoc3RhdGUgPSBpbml0aWFsU3RhdGUsIGFjdGlvbjogcHJvZmlsZUFjdGlvbnMuQWN0aW9ucyk6IFN0YXRlIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgY2FzZSBQcm9maWxlQWN0aW9uVHlwZXMuUkVHSVNURVJfVVNFUl9TVUNDRVNTOlxuICAgICAgY2FzZSBQcm9maWxlQWN0aW9uVHlwZXMuRURJVF9VU0VSX1BST0ZJTEVfU1VDQ0VTUzpcbiAgICAgIGNhc2UgUHJvZmlsZUFjdGlvblR5cGVzLkdFVF9VU0VSX1BST0ZJTEVfU1VDQ0VTUzp7XG4gICAgICAgICAgbGV0IHVzZXI6VXNlck1vZGVsO1xuICAgICAgICAgIGlmKGFjdGlvbi5wYXlsb2FkLmhhc093blByb3BlcnR5KCd1c2VyJykgfHxcbiAgICAgICAgICAgICBhY3Rpb24ucGF5bG9hZC5oYXNPd25Qcm9wZXJ0eSgndXNlcm5hbWUnKSkge1xuICAgICAgICAgICAgICBjb25zdCB1c2VyOlVzZXJNb2RlbCA9IGFjdGlvbi5wYXlsb2FkLmhhc093blByb3BlcnR5KCd1c2VyJyk/IDxVc2VyTW9kZWw+KGFjdGlvbi5wYXlsb2FkLnVzZXIpIDogPFVzZXJNb2RlbD4oYWN0aW9uLnBheWxvYWQpO1xuICAgICAgICAgICAgICBpZiAoc3RhdGUuaWRzLmluZGV4T2YodXNlci5pZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWRzOiBbIC4uLnN0YXRlLmlkcywgdXNlci5pZCBdLFxuICAgICAgICAgICAgICAgIGVudGl0aWVzOiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5lbnRpdGllcywge1xuICAgICAgICAgICAgICAgICAgW3VzZXIuaWRdOiB1c2VyXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRQcm9maWxlSWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgdmFsaWRVc2VyTmFtZTogIHN0YXRlLnZhbGlkVXNlck5hbWVcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYXNlIFByb2ZpbGVBY3Rpb25UeXBlcy5DSEVDS19VU0VSX1BST0ZJTEVfTkFNRV9TVUNDRVNTOntcbiAgICAgICAgICAgaWYoYWN0aW9uLnBheWxvYWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZFVzZXJOYW1lID0gKChhY3Rpb24ucGF5bG9hZCkuaGFzT3duUHJvcGVydHkoJ3VzZXJuYW1lJykpPydpblZhbGlkJzondmFsaWQnO1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge3ZhbGlkVXNlck5hbWU6dmFsaWRVc2VyTmFtZSB9KTtcbiAgICAgICAgICAgfVxuICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgUHJvZmlsZUFjdGlvblR5cGVzLkNIRUNLX1VTRVJfUFJPRklMRV9OQU1FX0ZBSUxVUkU6e1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCAgIHt2YWxpZFVzZXJOYW1lOid2YWxpZCcgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgUHJvZmlsZUFjdGlvblR5cGVzLlJFU0VUX1VTRVJfUFJPRklMRV9OQU1FX1ZBTElEOntcbiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHt2YWxpZFVzZXJOYW1lOidpbnZhbGlkJyB9KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSBQcm9maWxlQWN0aW9uVHlwZXMuU0VUX1NFTEVDVEVEX1BST0ZJTEVfSUQ6e1xuICAgICAgICAgIGlmIChzdGF0ZS5pZHMuaW5kZXhPZihhY3Rpb24ucGF5bG9hZCkgPiAtMSkge1xuICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge3NlbGVjdGVkUHJvZmlsZUlkOmFjdGlvbi5wYXlsb2FkIH0pO1xuICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9XG4gICAgICB9XG59XG5cbi8qKlxuICogQmVjYXVzZSB0aGUgZGF0YSBzdHJ1Y3R1cmUgaXMgZGVmaW5lZCB3aXRoaW4gdGhlIHJlZHVjZXIgaXQgaXMgb3B0aW1hbCB0b1xuICogbG9jYXRlIG91ciBzZWxlY3RvciBmdW5jdGlvbnMgYXQgdGhpcyBsZXZlbC4gSWYgc3RvcmUgaXMgdG8gYmUgdGhvdWdodCBvZlxuICogYXMgYSBkYXRhYmFzZSwgYW5kIHJlZHVjZXJzIHRoZSB0YWJsZXMsIHNlbGVjdG9ycyBjYW4gYmUgY29uc2lkZXJlZCB0aGVcbiAqIHF1ZXJpZXMgaW50byBzYWlkIGRhdGFiYXNlLiBSZW1lbWJlciB0byBrZWVwIHlvdXIgc2VsZWN0b3JzIHNtYWxsIGFuZFxuICogZm9jdXNlZCBzbyB0aGV5IGNhbiBiZSBjb21iaW5lZCBhbmQgY29tcG9zZWQgdG8gZml0IGVhY2ggcGFydGljdWxhclxuICogdXNlLWNhc2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGdldEVudGl0aWVzID0gKHN0YXRlOiBTdGF0ZSkgPT4gc3RhdGUuZW50aXRpZXM7XG5cbmV4cG9ydCBjb25zdCBnZXRJZHMgPSAoc3RhdGU6IFN0YXRlKSA9PiBzdGF0ZS5pZHM7XG5cbmV4cG9ydCBjb25zdCBnZXRTZWxlY3RlZFByb2ZpbGVJZCA9IChzdGF0ZTogU3RhdGUpID0+IHN0YXRlLnNlbGVjdGVkUHJvZmlsZUlkO1xuXG5leHBvcnQgY29uc3QgZ2V0VmFsaWRVc2VyTmFtZSA9IChzdGF0ZTogU3RhdGUpID0+IHN0YXRlLnZhbGlkVXNlck5hbWU7XG5cbmV4cG9ydCBjb25zdCBnZXRTZWxlY3RlZFByb2ZpbGUgID0gY3JlYXRlU2VsZWN0b3IoZ2V0RW50aXRpZXMsIGdldFNlbGVjdGVkUHJvZmlsZUlkLCAoZW50aXRpZXMsIHNlbGVjdGVkUHJvZmlsZUlkKSA9PiB7XG4gIHJldHVybiBlbnRpdGllc1tzZWxlY3RlZFByb2ZpbGVJZF07XG59KTtcblxuXG4iXX0=
